# Tank Game Client

参考《Unity3D网络游戏实战》（第二版）制作的游戏Demo。

相比[原书籍提供的示例代码](https://github.com/luopeiyu/unity_net_book)，本仓库做了符合本人编码习惯的彻底重构和不少新功能的添加。仅供学习参考使用。

所有的游戏素材（地图、UI、模型等）均来源于参考文献提供的Demo，和免费公开的网络资源。

这里是客户端Git仓库，服务端位于[此处](https://github.com/MercuryGH/tank-game-server)。

## 开发环境

* Windows 10
* Unity 2019.4.21f1c1

## 游戏玩法说明和演示

### 游戏玩法说明

你可以在本仓库的Release下，下载本游戏的Windows x86-64发行版。

要进行游戏，首先，你需要确保联网，并注册一个账号，然后登录。进入游戏大厅，你可以选择加入已有的游戏房间，或者创建一个游戏房间。

在游戏房间内，如果玩家数目不小于两人，那么房主可以与同房间的所有玩家开始战斗。在战斗中，使用WASD移动坦克，QE旋转炮塔，鼠标移动视角，鼠标左键开火。摧毁所有敌方坦克，则获得胜利。

### 游戏演示

<img src="doc/img/demo.gif"/>

## 客户端技术细节

* 所有玩家每秒都会向服务端发送20次位置同步数据，同时接收服务端传来的其他玩家的位置信息；
* 其他玩家的坦克的移动、炮塔旋转位置通过简单的线性插值预测实现；
* 炮弹是否命中由客户端（射击者）进行判断，服务端进行简单反作弊验证、伤害计算和广播；
* 自动瞄准功能的实现：
 1. 在玩家控制的坦克类`CtrlTank`中每帧更新：获取炮管射线与实体层的交点，并将该点显示在游戏中；
 2. 如果玩家手动旋转了炮塔，返回；
 3. 遍历所有其他敌对非死亡坦克，如果距离均大于搜索距离，或者连线超过火炮俯仰角限制，返回；
 4. 选择一个最近的敌对非死亡坦克，自动旋转炮塔+炮管至它的方向。

## TODO:

* 房间中的所有玩家准备后，游戏才能开始。
* 添加游戏AI。
* 添加爆炸、被摧毁后的效果。
* 添加坦克撞击数目、栅栏的物理效果。
* 优化射击手感，移动鼠标可旋转炮塔，命中不同部位生命值减少不等……
* （客户端能做的事情太多了

